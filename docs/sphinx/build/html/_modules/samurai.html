<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>samurai &#8212; FFXIV - Samurai Analysis  documentation</title>
    
    <link rel="stylesheet" href="../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
  </head>
  <body role="document">
      <div class="header" role="banner"><h1 class="heading"><a href="../index.html">
          <span>FFXIV - Samurai Analysis  documentation</span></a></h1>
        <h2 class="heading"><span>samurai</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        <a class="uplink" href="../index.html">Contents</a>
        </p>

      </div>
      <div class="content">
        
        
  <h1>Source code for samurai</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">string</span>

<span class="c1"># potency modifiers for each buff</span>
<span class="n">JINPU_MOD</span> <span class="o">=</span> <span class="mf">1.15</span>
<span class="n">SHIFU_MOD</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">YUKIKAZE_MOD</span> <span class="o">=</span> <span class="mf">1.11</span>
<span class="n">KAITEN_MOD</span> <span class="o">=</span> <span class="mf">1.5</span>


<div class="viewcode-block" id="Samurai"><a class="viewcode-back" href="../samurai.html#samurai.Samurai">[docs]</a><span class="k">class</span> <span class="nc">Samurai</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    SAM</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_gcd</span><span class="o">=</span><span class="mf">2.40</span><span class="p">,</span> <span class="n">kenki_mastery</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor for an instance of the Samurai class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_base_gcd</span> <span class="o">=</span> <span class="n">base_gcd</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_current_gcd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_gcd</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_kenki_mastery</span> <span class="o">=</span> <span class="n">kenki_mastery</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_potency_mod</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kenki_gauge</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_has_jinpu</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_has_shifu</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_applied_yukikaze</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_applied_higanbana</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_has_meikyo_shisui</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_has_hissatsu_kaiten</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_has_getsu</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_has_ka</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_has_setsu</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_combo_act_gekko</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_combo_act_mangetsu</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_combo_act_kasha</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_combo_act_shifu</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_combo_act_jinpu</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_combo_act_oka</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_combo_act_yukikaze</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_enhanced_enbi</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_open_eyes</span> <span class="o">=</span> <span class="kc">False</span>

<div class="viewcode-block" id="Samurai.parse_rotation"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.parse_rotation">[docs]</a>    <span class="k">def</span> <span class="nf">parse_rotation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">n_targets</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a dataframe describing the given rotation.</span>

<span class="sd">        :param rotation: A list of tuples describing each GCD with strings.</span>
<span class="sd">         Each tuple takes the format (weaponskill, ability). If no ability is used, a 1-tuple may be supplied:</span>
<span class="sd">         (&#39;weaponskill).</span>

<span class="sd">        :param n_targets: Number of targets available in the encounter. Defaults to 1.</span>

<span class="sd">        :return: df: A Pandas DataFrame object describing the rotation</span>

<span class="sd">        :return: average_potency: The average potency per GCD of the rotation</span>

<span class="sd">        :return: pps: The average potency per second of the rotation</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">parsed_gcds</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">snapshot_dot_modifier</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">n_applied_higanbana</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">meikyo_shisui_counter</span> <span class="o">=</span> <span class="mi">3</span>

        <span class="n">higanbana_timer</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">shifu_timer</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">jinpu_timer</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">yukikaze_timer</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">current_time</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rotation</span><span class="p">)):</span>
            <span class="n">gcd</span> <span class="o">=</span> <span class="n">rotation</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>

            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">gcd</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">tuple</span><span class="p">:</span>
                <span class="n">weaponskill</span> <span class="o">=</span> <span class="n">gcd</span>
                <span class="n">ability</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">weaponskill</span> <span class="o">=</span> <span class="n">gcd</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">ability</span> <span class="o">=</span> <span class="n">gcd</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

            <span class="c1"># convert input text to lowercase, replace punctuation, and replace spaces with underscores</span>
            <span class="n">parsed_ws</span> <span class="o">=</span> <span class="n">weaponskill</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">string</span><span class="o">.</span><span class="n">punctuation</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span>

            <span class="c1"># record buff status at beginning of GCD</span>
            <span class="n">buff_status</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">has_jinpu</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_shifu</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">applied_yukikaze</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">applied_higanbana</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">kenki_gauge</span><span class="p">)</span>

            <span class="c1"># compute potency of weaponskill</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_hissatsu_kaiten</span><span class="p">:</span>
                <span class="c1"># Hissatsu: Kaiten buff is active; apply increased potency</span>
                <span class="n">ws_potency</span> <span class="o">=</span> <span class="n">KAITEN_MOD</span><span class="o">*</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parsed_ws</span><span class="p">)(</span><span class="n">n_targets</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">has_hissatsu_kaiten</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ws_potency</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parsed_ws</span><span class="p">)(</span><span class="n">n_targets</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">ability</span><span class="p">:</span>
                <span class="c1"># use empty string to fill the ability value</span>
                <span class="n">parsed_gcds</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">current_time</span><span class="p">,</span> <span class="n">weaponskill</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ws_potency</span>
                                    <span class="o">+</span> <span class="n">snapshot_dot_modifier</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">higanbana_dot</span><span class="p">())</span>
                                   <span class="o">+</span> <span class="n">buff_status</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># convert input text to lowercase, replace punctuation, and replace spaces with underscores</span>
                <span class="n">parsed_ability</span> <span class="o">=</span> <span class="n">ability</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">string</span><span class="o">.</span><span class="n">punctuation</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span>

                <span class="n">parsed_gcds</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">current_time</span><span class="p">,</span> <span class="n">weaponskill</span><span class="p">,</span> <span class="n">ability</span><span class="p">,</span> <span class="n">ws_potency</span>
                                    <span class="o">+</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parsed_ability</span><span class="p">)(</span><span class="n">n_targets</span><span class="p">)</span>
                                    <span class="o">+</span> <span class="n">snapshot_dot_modifier</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">higanbana_dot</span><span class="p">())</span>
                                   <span class="o">+</span> <span class="n">buff_status</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">parsed_ability</span> <span class="o">==</span> <span class="s1">&#39;meikyo_shisui&#39;</span><span class="p">:</span>
                    <span class="c1"># allocate three weaponskills for Meikyo Shisui buff</span>
                    <span class="n">meikyo_shisui_counter</span> <span class="o">=</span> <span class="mi">3</span>

            <span class="c1"># update Higanbana DoT potency</span>
            <span class="k">if</span> <span class="n">parsed_ws</span> <span class="o">==</span> <span class="s1">&#39;higanbana&#39;</span><span class="p">:</span>
                <span class="c1"># add a target afflicted by Higanbana DoT</span>
                <span class="n">n_applied_higanbana</span> <span class="o">+=</span> <span class="mi">1</span>

                <span class="k">if</span> <span class="n">n_targets</span> <span class="o">&gt;=</span> <span class="n">n_applied_higanbana</span><span class="p">:</span>
                    <span class="c1"># in this case, there are more total targets than those afflicted with Higanbana DoT</span>
                    <span class="c1"># snapshot buffs at time of DoT application and add to current DoT tick multiplier</span>
                    <span class="n">snapshot_dot_modifier</span> <span class="o">+=</span> <span class="n">JINPU_MOD</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_jinpu</span> <span class="k">else</span> <span class="mf">1.0</span>

                    <span class="c1"># update the number of targets afflicted by Higanbana DoT</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">applied_higanbana</span> <span class="o">=</span> <span class="n">n_applied_higanbana</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># in this case, all targets have been afflicted with Higanbana DoT</span>
                    <span class="c1"># overwrite the DoT modifier due to clipping</span>
                    <span class="n">snapshot_dot_modifier</span> <span class="o">=</span> <span class="n">JINPU_MOD</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_jinpu</span> <span class="k">else</span> <span class="mf">1.0</span>

                    <span class="c1"># max out the number of afflicted targets</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">applied_higanbana</span> <span class="o">=</span> <span class="n">n_targets</span>

            <span class="c1"># update counters</span>
            <span class="n">meikyo_shisui_counter</span> <span class="o">-=</span> <span class="mi">1</span>  <span class="c1"># expended one Meikyo Shisui charge</span>

            <span class="k">if</span> <span class="n">meikyo_shisui_counter</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1"># deactivate Meikyo Shisui if all charges expended</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">has_meikyo_shisui</span> <span class="o">=</span> <span class="kc">False</span>

            <span class="k">if</span> <span class="n">parsed_ws</span> <span class="o">==</span> <span class="s1">&#39;higanbana&#39;</span><span class="p">:</span>
                <span class="c1"># start Higanbana DoT timer</span>
                <span class="c1"># accounts for cast time; scaling derived from leaked tooltip</span>
                <span class="n">higanbana_timer</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">+</span> <span class="mf">1.73</span><span class="o">/</span><span class="mf">2.41</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">current_gcd</span>

            <span class="k">if</span> <span class="n">parsed_ws</span> <span class="o">==</span> <span class="s1">&#39;shifu&#39;</span><span class="p">:</span>
                <span class="c1"># start Shifu buff timer</span>
                <span class="n">shifu_timer</span> <span class="o">=</span> <span class="mi">30</span>

            <span class="k">if</span> <span class="n">parsed_ws</span> <span class="o">==</span> <span class="s1">&#39;jinpu&#39;</span><span class="p">:</span>
                <span class="c1"># start Jinpu buff timer</span>
                <span class="n">jinpu_timer</span> <span class="o">=</span> <span class="mi">30</span>

            <span class="k">if</span> <span class="n">parsed_ws</span> <span class="o">==</span> <span class="s1">&#39;yukikaze&#39;</span><span class="p">:</span>
                <span class="c1"># start slashing resistance down timer</span>
                <span class="n">yukikaze_timer</span> <span class="o">=</span> <span class="mi">30</span>

            <span class="c1"># update time and timers</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_shifu</span><span class="p">:</span>
                <span class="c1"># Shifu haste buff reduces recast time/GCD</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">current_gcd</span> <span class="o">=</span> <span class="mf">0.90</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">base_gcd</span>

            <span class="n">current_time</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_gcd</span>
            <span class="n">higanbana_timer</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_gcd</span>
            <span class="n">shifu_timer</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_gcd</span>
            <span class="n">jinpu_timer</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_gcd</span>
            <span class="n">yukikaze_timer</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_gcd</span>

            <span class="k">if</span> <span class="n">higanbana_timer</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1"># DoT has fallen off</span>
                <span class="n">n_applied_higanbana</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">applied_higanbana</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">snapshot_dot_modifier</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">if</span> <span class="n">shifu_timer</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1"># Shifu has fallen off</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">has_shifu</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">jinpu_timer</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1"># Jinpu has fallen off</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">has_jinpu</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">yukikaze_timer</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1"># Slashing resistance down has fallen off</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">applied_yukikaze</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># form output DataFrame and metrics</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">parsed_gcds</span><span class="p">,</span>
                          <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Time&#39;</span><span class="p">,</span> <span class="s1">&#39;Weaponskill&#39;</span><span class="p">,</span> <span class="s1">&#39;Ability&#39;</span><span class="p">,</span> <span class="s1">&#39;Potency&#39;</span><span class="p">,</span>
                                   <span class="s1">&#39;Jinpu&#39;</span><span class="p">,</span> <span class="s1">&#39;Shifu&#39;</span><span class="p">,</span> <span class="s1">&#39;Yukikaze&#39;</span><span class="p">,</span> <span class="s1">&#39;Higanbana&#39;</span><span class="p">,</span>
                                   <span class="s1">&#39;Kenki&#39;</span><span class="p">])</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Total Potency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Potency&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

        <span class="n">average_potency</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Potency&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
        <span class="n">potency_ps</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Total Potency&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">/</span><span class="n">current_time</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;average potency per GCD = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">average_potency</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;average potency per second = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">potency_ps</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span><span class="p">,</span> <span class="n">average_potency</span><span class="p">,</span> <span class="n">potency_ps</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">base_gcd</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The base GCD length in seconds.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_gcd</span>

    <span class="nd">@base_gcd</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">base_gcd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;The base GCD may only be set in the constructor!&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">current_gcd</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The current GCD length in seconds.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_gcd</span>

    <span class="nd">@current_gcd</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">current_gcd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="nb">float</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_current_gcd</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">kenki_mastery</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Kenki Mastery II trait is active if True; False if Kenki Mastery I only.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kenki_mastery</span>

    <span class="nd">@kenki_mastery</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">kenki_mastery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Kenki Mastery may only be set in the constructor!&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">potency_mod</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Potency modifier based on Jinpu buff and slashing resistance down debuff.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_potency_mod</span>

    <span class="nd">@potency_mod</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">potency_mod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_potency_mod</span> <span class="o">=</span> <span class="n">value</span>

<div class="viewcode-block" id="Samurai.potency_mod_update"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.potency_mod_update">[docs]</a>    <span class="k">def</span> <span class="nf">potency_mod_update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Method to update the potency modifier when weaponskills are used.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_potency_mod</span> <span class="o">=</span> <span class="mf">1.0</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_jinpu</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_potency_mod</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">*</span><span class="n">JINPU_MOD</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">applied_yukikaze</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_potency_mod</span> <span class="o">=</span> <span class="n">YUKIKAZE_MOD</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_potency_mod</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">kenki_gauge</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The current Kenki gauge reading.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kenki_gauge</span>

    <span class="nd">@kenki_gauge</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">kenki_gauge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kenki_gauge</span> <span class="o">=</span> <span class="n">value</span>

<div class="viewcode-block" id="Samurai.inc_kenki_gauge"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.inc_kenki_gauge">[docs]</a>    <span class="k">def</span> <span class="nf">inc_kenki_gauge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inc_amt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Changes the Kenki gauge amount by inc_amt.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">inc_amt</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_kenki_gauge</span> <span class="o">+=</span> <span class="n">inc_amt</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kenki_gauge</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">kenki_gauge</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kenki_gauge</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">kenki_gauge</span> <span class="o">=</span> <span class="mi">100</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">has_jinpu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;If the Jinpu buff is active.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_jinpu</span>

    <span class="nd">@has_jinpu</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">has_jinpu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_has_jinpu</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">has_shifu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;If the Shifu buff is active.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_shifu</span>

    <span class="nd">@has_shifu</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">has_shifu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_has_shifu</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">applied_yukikaze</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;If the slashing resistance down debuff from Yukikaze is applied.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_applied_yukikaze</span>

    <span class="nd">@applied_yukikaze</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">applied_yukikaze</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_applied_yukikaze</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">applied_higanbana</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Number of targets afflicted with the Higanbana DoT.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_applied_higanbana</span>

    <span class="nd">@applied_higanbana</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">applied_higanbana</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_applied</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">n_applied</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_applied_higanbana</span> <span class="o">=</span> <span class="n">n_applied</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">has_meikyo_shisui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;If the Meikyo Shisui buff is active.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_meikyo_shisui</span>

    <span class="nd">@has_meikyo_shisui</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">has_meikyo_shisui</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_has_meikyo_shisui</span> <span class="o">=</span> <span class="n">value</span>

<div class="viewcode-block" id="Samurai.meikyo_shisui_active"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.meikyo_shisui_active">[docs]</a>    <span class="k">def</span> <span class="nf">meikyo_shisui_active</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The Meikyo Shisui buff allows combo bonuses without executing combos for up to three weaponskills.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_meikyo_shisui</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_gekko</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_mangetsu</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_kasha</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_shifu</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_jinpu</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_oka</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_yukikaze</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_gekko</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_mangetsu</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_kasha</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_shifu</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_jinpu</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_oka</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_yukikaze</span> <span class="o">=</span> <span class="kc">False</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">has_hissatsu_kaiten</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;If the Hissatsu: Kaiten buff is active.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_hissatsu_kaiten</span>

    <span class="nd">@has_hissatsu_kaiten</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">has_hissatsu_kaiten</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_has_hissatsu_kaiten</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">has_getsu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;If the Getsu Sen is opened.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_getsu</span>

    <span class="nd">@has_getsu</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">has_getsu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_has_getsu</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">has_ka</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;If the Ka Sen is opened.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_ka</span>

    <span class="nd">@has_ka</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">has_ka</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_has_ka</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">has_setsu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;If the Setsu Sen is opened.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_setsu</span>

    <span class="nd">@has_setsu</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">has_setsu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_has_setsu</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">combo_act_gekko</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;If the Gekko combo bonus is applicable.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_combo_act_gekko</span>

    <span class="nd">@combo_act_gekko</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">combo_act_gekko</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_combo_act_gekko</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">combo_act_mangetsu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;If the Mangetsu combo bonus is applicable.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_combo_act_mangetsu</span>

    <span class="nd">@combo_act_mangetsu</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">combo_act_mangetsu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_combo_act_mangetsu</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">combo_act_kasha</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;If the Kasha combo bonus is applicable.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_combo_act_kasha</span>

    <span class="nd">@combo_act_kasha</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">combo_act_kasha</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_combo_act_kasha</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">combo_act_jinpu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;If the Jinpu combo bonus is available.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_combo_act_jinpu</span>

    <span class="nd">@combo_act_jinpu</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">combo_act_jinpu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_combo_act_jinpu</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">combo_act_shifu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;If the Shifu combo bonus is available.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_combo_act_shifu</span>

    <span class="nd">@combo_act_shifu</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">combo_act_shifu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_combo_act_shifu</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">combo_act_oka</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;If the Oka combo bonus is available.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_combo_act_oka</span>

    <span class="nd">@combo_act_oka</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">combo_act_oka</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_combo_act_oka</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">combo_act_yukikaze</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;If the Yukikaze combo bonus is available.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_combo_act_yukikaze</span>

    <span class="nd">@combo_act_yukikaze</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">combo_act_yukikaze</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_combo_act_yukikaze</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">enhanced_enbi</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;If the Enhanced Enbi status is active.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enhanced_enbi</span>

    <span class="nd">@enhanced_enbi</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">enhanced_enbi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_enhanced_enbi</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">open_eyes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;If the Open Eyes status from Third Eye is active.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_open_eyes</span>

    <span class="nd">@open_eyes</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">open_eyes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_open_eyes</span> <span class="o">=</span> <span class="n">value</span>

<div class="viewcode-block" id="Samurai.hakaze"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.hakaze">[docs]</a>    <span class="k">def</span> <span class="nf">hakaze</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_targets</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        lvl 1</span>

<span class="sd">        Delivers an attack with a potency of 150.</span>

<span class="sd">        **Additional Effect**: Increases Kenki Gauge by 5</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">potency</span> <span class="o">=</span> <span class="mi">150</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_yukikaze</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_shifu</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_jinpu</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">kenki_mastery</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inc_kenki_gauge</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">potency_mod</span><span class="o">*</span><span class="n">potency</span></div>

<div class="viewcode-block" id="Samurai.jinpu"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.jinpu">[docs]</a>    <span class="k">def</span> <span class="nf">jinpu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_targets</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        lvl 4</span>

<span class="sd">        Delivers an attack with a potency of 100.</span>

<span class="sd">        **Combo Action**: Hakaze</span>

<span class="sd">        **Combo Potency**: 280</span>

<span class="sd">        **Combo Bonus**: Increases damage dealt by 15%</span>

<span class="sd">        **Duration**: 30s</span>

<span class="sd">        **Combo Bonus**: Increases Kenki Gauge by 5</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_jinpu</span><span class="p">:</span>
            <span class="n">potency</span> <span class="o">=</span> <span class="mi">280</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">has_jinpu</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_gekko</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">kenki_mastery</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">inc_kenki_gauge</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">potency</span> <span class="o">=</span> <span class="mi">100</span>

        <span class="n">potency</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">potency_mod</span><span class="o">*</span><span class="n">potency</span>  <span class="c1"># don&#39;t want buff before effect is applied</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_jinpu</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">potency_mod_update</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">potency</span></div>

<div class="viewcode-block" id="Samurai.gekko"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.gekko">[docs]</a>    <span class="k">def</span> <span class="nf">gekko</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_targets</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        lvl 30</span>

<span class="sd">        Delivers an attack with a potency of 100.</span>

<span class="sd">        **Combo Action**: Jinpu</span>

<span class="sd">        **Combo Potency**: 400</span>

<span class="sd">        **Rear Combo Bonus**: Increases Kenki Gauge by 10</span>

<span class="sd">        **Combo Bonus**: Grants Getsu</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_gekko</span><span class="p">:</span>
            <span class="n">potency</span> <span class="o">=</span> <span class="mi">400</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">has_getsu</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inc_kenki_gauge</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">potency</span> <span class="o">=</span> <span class="mi">100</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_gekko</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">potency_mod</span><span class="o">*</span><span class="n">potency</span></div>

<div class="viewcode-block" id="Samurai.shifu"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.shifu">[docs]</a>    <span class="k">def</span> <span class="nf">shifu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_targets</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        lvl 18</span>

<span class="sd">        Delivers an attack with a potency of 100.</span>

<span class="sd">        **Combo Action**: Hakaze</span>

<span class="sd">        **Combo Potency**: 280</span>

<span class="sd">        **Combo Bonus**: Reduces weaponskill cast time and recast time, spell cast time and recast time,</span>
<span class="sd">        and auto-attack delay by 10%</span>

<span class="sd">        **Duration**: 30s</span>

<span class="sd">        **Combo Bonus**: Increases Kenki Gauge by 5</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_shifu</span><span class="p">:</span>
            <span class="n">potency</span> <span class="o">=</span> <span class="mi">280</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">has_shifu</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_kasha</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">kenki_mastery</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">inc_kenki_gauge</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">potency</span> <span class="o">=</span> <span class="mi">100</span>

        <span class="n">potency</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">potency_mod</span><span class="o">*</span><span class="n">potency</span> <span class="c1"># don&#39;t want updated potency before effect is applied</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_shifu</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">potency_mod_update</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">potency</span></div>

<div class="viewcode-block" id="Samurai.kasha"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.kasha">[docs]</a>    <span class="k">def</span> <span class="nf">kasha</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_targets</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        lvl 40</span>

<span class="sd">        Delivers an attack with a potency of 100.</span>

<span class="sd">        **Combo Action**: Shifu</span>

<span class="sd">        **Combo Potency**: 400</span>

<span class="sd">        **Side Combo Bonus**: Increases Kenki Gauge by 10</span>

<span class="sd">        **Combo Bonus**: Grants Ka</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_kasha</span><span class="p">:</span>
            <span class="n">potency</span> <span class="o">=</span> <span class="mi">400</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">has_ka</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inc_kenki_gauge</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">potency</span> <span class="o">=</span> <span class="mi">100</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_kasha</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">potency_mod</span><span class="o">*</span><span class="n">potency</span></div>

<div class="viewcode-block" id="Samurai.yukikaze"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.yukikaze">[docs]</a>    <span class="k">def</span> <span class="nf">yukikaze</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_targets</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        lvl 50</span>

<span class="sd">        Delivers an attack with a potency of 100.</span>

<span class="sd">        **Combo Action**: Hakaze</span>

<span class="sd">        **Combo Potency**: 340</span>

<span class="sd">        **Combo Bonus**: Reduces target&#39;s slashing resistance by 10%</span>

<span class="sd">        **Duration**: 30s</span>

<span class="sd">        **Combo Bonus**: Increases Kenki Gauge by 10</span>

<span class="sd">        **Combo Bonus**: Grants Setsu</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_yukikaze</span><span class="p">:</span>
            <span class="n">potency</span> <span class="o">=</span> <span class="mi">340</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">applied_yukikaze</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">has_setsu</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inc_kenki_gauge</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">potency</span> <span class="o">=</span> <span class="mi">100</span>

        <span class="n">potency</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">potency_mod</span><span class="o">*</span><span class="n">potency</span> <span class="c1"># don&#39;t want updated potency before effect is applied</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_yukikaze</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1"># add status to target?</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">potency_mod_update</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">potency</span></div>

<div class="viewcode-block" id="Samurai.fuga"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.fuga">[docs]</a>    <span class="k">def</span> <span class="nf">fuga</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_targets</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        lvl 26</span>

<span class="sd">        Delivers an attack with a potency of 100 to all enemies in a cone before you.</span>

<span class="sd">        **Additional Effect**: Increases Kenki Gauge by 5</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">potency</span> <span class="o">=</span> <span class="mi">100</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_mangetsu</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_oka</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">kenki_mastery</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inc_kenki_gauge</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">potency_mod</span><span class="o">*</span><span class="n">potency</span><span class="o">*</span><span class="n">n_targets</span></div>

<div class="viewcode-block" id="Samurai.oka"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.oka">[docs]</a>    <span class="k">def</span> <span class="nf">oka</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_targets</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        lvl 45</span>

<span class="sd">        Delivers an attack with a potency of 100 to all nearby enemies.</span>

<span class="sd">        **Combo Action**: Fuga</span>

<span class="sd">        **Combo Potency**: 200 for the first enemy, 10% less for the second, 20% less for the third,</span>
<span class="sd">        30% less for the fourth, 40% less for the fifth, and 50% less for all remaining enemies</span>

<span class="sd">        **Combo Bonus**: Increases Kenki Gauge by 10</span>

<span class="sd">        **Combo Bonus**: Grants Ka</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_oka</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">n_targets</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
                <span class="n">potency</span> <span class="o">=</span> <span class="mi">200</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">0.9</span> <span class="o">+</span> <span class="mf">0.8</span> <span class="o">+</span> <span class="mf">0.7</span> <span class="o">+</span> <span class="mf">0.6</span> <span class="o">+</span> <span class="mf">0.5</span><span class="o">*</span><span class="p">(</span><span class="n">n_targets</span><span class="o">-</span><span class="mi">5</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">n_targets</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">:</span>
                <span class="n">potency</span> <span class="o">=</span> <span class="mi">200</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">0.9</span> <span class="o">+</span> <span class="mf">0.8</span> <span class="o">+</span> <span class="mf">0.7</span> <span class="o">+</span> <span class="mf">0.6</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">n_targets</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">potency</span> <span class="o">=</span> <span class="mi">200</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">0.9</span> <span class="o">+</span> <span class="mf">0.8</span> <span class="o">+</span> <span class="mf">0.7</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">n_targets</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">potency</span> <span class="o">=</span> <span class="mi">200</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">0.9</span> <span class="o">+</span> <span class="mf">0.8</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">n_targets</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">potency</span> <span class="o">=</span> <span class="mi">200</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">0.9</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">potency</span> <span class="o">=</span> <span class="mi">200</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">has_ka</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inc_kenki_gauge</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">potency</span> <span class="o">=</span> <span class="mi">100</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_oka</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">potency_mod</span><span class="o">*</span><span class="n">potency</span></div>

<div class="viewcode-block" id="Samurai.mangetsu"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.mangetsu">[docs]</a>    <span class="k">def</span> <span class="nf">mangetsu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_targets</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        lvl 35</span>

<span class="sd">        Delivers an attack with a potency of 100 to all nearby enemies.</span>

<span class="sd">        **Combo Action**: Fuga</span>

<span class="sd">        **Combo Potency**: 200 for the first enemy, 10% less for the second, 20% less for the third,</span>
<span class="sd">        30% less for the fourth, 40% less for the fifth, and 50% less for all remaining enemies</span>

<span class="sd">        **Combo Bonus**: Increases Kenki Gauge by 10</span>

<span class="sd">        **Combo Bonus**: Grants Getsu</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_mangetsu</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">n_targets</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
                <span class="n">potency</span> <span class="o">=</span> <span class="mi">200</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">0.9</span> <span class="o">+</span> <span class="mf">0.8</span> <span class="o">+</span> <span class="mf">0.7</span> <span class="o">+</span> <span class="mf">0.6</span> <span class="o">+</span> <span class="mf">0.5</span><span class="o">*</span><span class="p">(</span><span class="n">n_targets</span><span class="o">-</span><span class="mi">5</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">n_targets</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">:</span>
                <span class="n">potency</span> <span class="o">=</span> <span class="mi">200</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">0.9</span> <span class="o">+</span> <span class="mf">0.8</span> <span class="o">+</span> <span class="mf">0.7</span> <span class="o">+</span> <span class="mf">0.6</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">n_targets</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">potency</span> <span class="o">=</span> <span class="mi">200</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">0.9</span> <span class="o">+</span> <span class="mf">0.8</span> <span class="o">+</span> <span class="mf">0.7</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">n_targets</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">potency</span> <span class="o">=</span> <span class="mi">200</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">0.9</span> <span class="o">+</span> <span class="mf">0.8</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">n_targets</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">potency</span> <span class="o">=</span> <span class="mi">200</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">0.9</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">potency</span> <span class="o">=</span> <span class="mi">200</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">has_getsu</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inc_kenki_gauge</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">potency</span> <span class="o">=</span> <span class="mi">100</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">combo_act_mangetsu</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">potency_mod</span><span class="o">*</span><span class="n">potency</span></div>

<div class="viewcode-block" id="Samurai.enbi"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.enbi">[docs]</a>    <span class="k">def</span> <span class="nf">enbi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_targets</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        lvl 15</span>

<span class="sd">        Delivers a ranged attack with a potency of 100.</span>

<span class="sd">        **Yaten Bonus Potency**: 300</span>

<span class="sd">        **Additional Effect**: Increases Kenki Gauge by 10</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">enhanced_enbi</span><span class="p">:</span>
            <span class="n">potency</span> <span class="o">=</span> <span class="mi">300</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">potency</span> <span class="o">=</span> <span class="mi">100</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">enhanced_enbi</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">kenki_mastery</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inc_kenki_gauge</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">potency_mod</span><span class="o">*</span><span class="n">potency</span></div>

<div class="viewcode-block" id="Samurai.higanbana"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.higanbana">[docs]</a>    <span class="k">def</span> <span class="nf">higanbana</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_targets</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delivers an attack with a potency of 240.</span>

<span class="sd">        **Additional Effect**: Damage over time</span>

<span class="sd">        **Potency**: 35</span>

<span class="sd">        **Duration**: 60s</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_getsu</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_setsu</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_ka</span><span class="p">:</span>
            <span class="n">potency</span> <span class="o">=</span> <span class="mi">240</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">potency_mod</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">has_getsu</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">has_setsu</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">has_ka</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;No Sen opened!&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">potency</span></div>

<div class="viewcode-block" id="Samurai.higanbana_dot"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.higanbana_dot">[docs]</a>    <span class="k">def</span> <span class="nf">higanbana_dot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_targets</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        DoT component of Higanbana.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">avg_mod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_gcd</span><span class="o">/</span><span class="mf">3.0</span>  <span class="c1"># this averages the DoT potency per GCD (3 second ticks)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_jinpu</span><span class="p">:</span>
            <span class="n">potency</span> <span class="o">=</span> <span class="n">JINPU_MOD</span><span class="o">*</span><span class="mi">35</span><span class="o">*</span><span class="n">avg_mod</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">potency</span> <span class="o">=</span> <span class="mi">35</span><span class="o">*</span><span class="n">avg_mod</span>

        <span class="k">return</span> <span class="n">potency</span></div>

<div class="viewcode-block" id="Samurai.tenka_goken"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.tenka_goken">[docs]</a>    <span class="k">def</span> <span class="nf">tenka_goken</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_targets</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delivers an attack to all nearby enemies with a potency of 360 for the first enemy, 10% less for the second,</span>
<span class="sd">        20% less for the third, 30% less for the fourth, 40% less for the fifth, and 50% less for all remaining enemies.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">sum</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">has_getsu</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_setsu</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_ka</span><span class="p">])</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">n_targets</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
                <span class="n">potency</span> <span class="o">=</span> <span class="mi">360</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">0.9</span> <span class="o">+</span> <span class="mf">0.8</span> <span class="o">+</span> <span class="mf">0.7</span> <span class="o">+</span> <span class="mf">0.6</span> <span class="o">+</span> <span class="mf">0.5</span><span class="o">*</span><span class="p">(</span><span class="n">n_targets</span><span class="o">-</span><span class="mi">5</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">n_targets</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">:</span>
                <span class="n">potency</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">0.9</span> <span class="o">+</span> <span class="mf">0.8</span> <span class="o">+</span> <span class="mf">0.7</span> <span class="o">+</span> <span class="mf">0.6</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">n_targets</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">potency</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">0.9</span> <span class="o">+</span> <span class="mf">0.8</span> <span class="o">+</span> <span class="mf">0.7</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">n_targets</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">potency</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">0.9</span> <span class="o">+</span> <span class="mf">0.8</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">n_targets</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">potency</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">0.9</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">potency</span> <span class="o">=</span> <span class="mi">360</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Not enough Sen opened!&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">potency_mod</span><span class="o">*</span><span class="n">potency</span></div>

<div class="viewcode-block" id="Samurai.midare_setsugekka"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.midare_setsugekka">[docs]</a>    <span class="k">def</span> <span class="nf">midare_setsugekka</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_targets</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delivers an attack with a potency of 720.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">sum</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">has_getsu</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_setsu</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_ka</span><span class="p">])</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">potency</span> <span class="o">=</span> <span class="mi">720</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Not enough Sen opened!&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">potency_mod</span><span class="o">*</span><span class="n">potency</span></div>

<div class="viewcode-block" id="Samurai.starry_eyes"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.starry_eyes">[docs]</a>    <span class="k">def</span> <span class="nf">starry_eyes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_targets</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        lvl 66</span>

<span class="sd">        Delivers an attack with a potency of 200.</span>

<span class="sd">        **Kenki Gauge Cost**: 25</span>

<span class="sd">        Can only be executed while under the effect of Open Eyes.</span>

<span class="sd">        Shares a recast timer with Merciful Eyes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">potency</span> <span class="o">=</span> <span class="mi">200</span>
        <span class="n">kenki_cost</span> <span class="o">=</span> <span class="mi">25</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">kenki_gauge</span> <span class="o">&gt;=</span> <span class="n">kenki_cost</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">open_eyes</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">potency</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">potency_mod</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Open Eyes status not active!&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Not enough Kenki available!&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Samurai.third_eye"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.third_eye">[docs]</a>    <span class="k">def</span> <span class="nf">third_eye</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        lvl 6</span>

<span class="sd">        **Recast**: 15s</span>

<span class="sd">        Grants the Open Eyes status, reducing the amount of damage taken by the next attack by 20%.</span>

<span class="sd">        **Duration**: 3s</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">open_eyes</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="Samurai.meditate"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.meditate">[docs]</a>    <span class="k">def</span> <span class="nf">meditate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        lvl 60</span>

<span class="sd">        **Recast**: 60s</span>

<span class="sd">        Gradually increases your Kenki Gauge.</span>

<span class="sd">        **Duration**: 15s</span>

<span class="sd">        Kenki Gauge not affected when used outside battle.</span>

<span class="sd">        Cancels auto-attack upon execution.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="Samurai.merciful_eyes"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.merciful_eyes">[docs]</a>    <span class="k">def</span> <span class="nf">merciful_eyes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        lvl 58</span>

<span class="sd">        **Recast**: 1s</span>

<span class="sd">        Instantly restores own HP.</span>

<span class="sd">        **Cure Potency**: 500</span>

<span class="sd">        Cure potency varies with current attack power.</span>

<span class="sd">        Can only be executed while under the effect of Open Eyes.</span>

<span class="sd">        Shares a recast timer with Starry Eyes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="Samurai.meikyo_shisui"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.meikyo_shisui">[docs]</a>    <span class="k">def</span> <span class="nf">meikyo_shisui</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_targets</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        lvl 50</span>

<span class="sd">        **Recast**: 80s</span>

<span class="sd">        Execute up to 3 combos without meeting combo prerequisites.</span>

<span class="sd">        **Duration**: 10s</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">has_meikyo_shisui</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">meikyo_shisui_active</span><span class="p">()</span>
        <span class="k">return</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="Samurai.ageha"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.ageha">[docs]</a>    <span class="k">def</span> <span class="nf">ageha</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_targets</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        lvl 10</span>

<span class="sd">        **Recast**: 60s</span>

<span class="sd">        Delivers an attack with a potency of 250.</span>

<span class="sd">        **Additional Effect**: Increases Kenki Gauge by 10</span>

<span class="sd">        If target&#39;s HP is 20% or less and killing blow is dealt, Kenki Gauge will increase by 20.</span>

<span class="sd">        *Only available if target&#39;s HP is 20% or less*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">potency</span> <span class="o">=</span> <span class="mi">250</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inc_kenki_gauge</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">potency</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">potency_mod</span></div>

<div class="viewcode-block" id="Samurai.hagakure"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.hagakure">[docs]</a>    <span class="k">def</span> <span class="nf">hagakure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_targets</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        lvl 68</span>

<span class="sd">        **Recast**: 40s</span>

<span class="sd">        Converts Setsu, Getsu, and Ka into Kenki. Each Sen converted increases your Kenki Gauge by 20. Can only be</span>
<span class="sd">        executed if under the effect of at least one of the three statuses.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">sen_total</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">has_setsu</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_getsu</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_ka</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">sen_total</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inc_kenki_gauge</span><span class="p">(</span><span class="n">sen_total</span><span class="o">*</span><span class="mi">20</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">has_setsu</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">has_getsu</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">has_ka</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;No Sen open to convert!&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="Samurai.hissatsu_kaiten"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.hissatsu_kaiten">[docs]</a>    <span class="k">def</span> <span class="nf">hissatsu_kaiten</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_targets</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        lvl 52</span>

<span class="sd">        **Recast**: 5s</span>

<span class="sd">        Increases potency of next weaponskill by 150%.</span>

<span class="sd">        **Duration**: 10s</span>

<span class="sd">        **Kenki Gauge Cost**: 20</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">kenki_cost</span> <span class="o">=</span> <span class="mi">20</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">kenki_gauge</span> <span class="o">&gt;=</span> <span class="n">kenki_cost</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">has_hissatsu_kaiten</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inc_kenki_gauge</span><span class="p">(</span><span class="o">-</span><span class="n">kenki_cost</span><span class="p">)</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Not enough Kenki available!&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Samurai.hissatsu_gyoten"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.hissatsu_gyoten">[docs]</a>    <span class="k">def</span> <span class="nf">hissatsu_gyoten</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_targets</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        lvl 54</span>

<span class="sd">        **Recast**: 10s</span>

<span class="sd">        Rushes target and delivers an attack with a potency of 100.</span>

<span class="sd">        **Kenki Gauge Cost**: 10</span>

<span class="sd">        Cannot be executed while bound.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">potency</span> <span class="o">=</span> <span class="mi">100</span>
        <span class="n">kenki_cost</span> <span class="o">=</span> <span class="mi">10</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">kenki_gauge</span> <span class="o">&gt;=</span> <span class="n">kenki_cost</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inc_kenki_gauge</span><span class="p">(</span><span class="o">-</span><span class="n">kenki_cost</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">potency</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">potency_mod</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Not enough Kenki available!&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Samurai.hissatsu_yaten"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.hissatsu_yaten">[docs]</a>    <span class="k">def</span> <span class="nf">hissatsu_yaten</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_targets</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        lvl 56</span>

<span class="sd">        **Recast**: 10s</span>

<span class="sd">        Delivers an attack with a potency of 100.</span>

<span class="sd">        **Additional Effect**: 10-yalm backstep</span>

<span class="sd">        **Additional Effect**: Grants Enhanced Enbi</span>

<span class="sd">        **Kenki Gauge Cost**: 10</span>

<span class="sd">        Cannot be executed while bound.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">potency</span> <span class="o">=</span> <span class="mi">100</span>
        <span class="n">kenki_cost</span> <span class="o">=</span> <span class="mi">10</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">kenki_gauge</span> <span class="o">&gt;=</span> <span class="n">kenki_cost</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inc_kenki_gauge</span><span class="p">(</span><span class="o">-</span><span class="n">kenki_cost</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">enhanced_enbi</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">return</span> <span class="n">potency</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">potency_mod</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Not enough Kenki available!&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Samurai.hissatsu_shinten"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.hissatsu_shinten">[docs]</a>    <span class="k">def</span> <span class="nf">hissatsu_shinten</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_targets</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        lvl 62</span>

<span class="sd">        **Recast**: 1s</span>

<span class="sd">        Delivers an attack with a potency of 300.</span>

<span class="sd">        **Kenki Gauge Cost**: 25</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">potency</span> <span class="o">=</span> <span class="mi">300</span>
        <span class="n">kenki_cost</span> <span class="o">=</span> <span class="mi">25</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">kenki_gauge</span> <span class="o">&gt;=</span> <span class="n">kenki_cost</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inc_kenki_gauge</span><span class="p">(</span><span class="o">-</span><span class="n">kenki_cost</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">potency</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">potency_mod</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Not enough Kenki available!&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Samurai.hissatsu_kyuten"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.hissatsu_kyuten">[docs]</a>    <span class="k">def</span> <span class="nf">hissatsu_kyuten</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_targets</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        lvl 64</span>

<span class="sd">        **Recast**: 1s</span>

<span class="sd">        Delivers an attack with a potency of 150 to all nearby enemies.</span>

<span class="sd">        **Kenki Gauge Cost**: 25</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">potency</span> <span class="o">=</span> <span class="n">n_targets</span><span class="o">*</span><span class="mi">150</span>
        <span class="n">kenki_cost</span> <span class="o">=</span> <span class="mi">25</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">kenki_gauge</span> <span class="o">&gt;=</span> <span class="n">kenki_cost</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inc_kenki_gauge</span><span class="p">(</span><span class="o">-</span><span class="n">kenki_cost</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">potency</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">potency_mod</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Not enough Kenki available!&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Samurai.hissatsu_guren"><a class="viewcode-back" href="../samurai.html#samurai.Samurai.hissatsu_guren">[docs]</a>    <span class="k">def</span> <span class="nf">hissatsu_guren</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_targets</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        lvl 70</span>

<span class="sd">        **Recast**: 120s</span>

<span class="sd">        Delivers an attack to all enemies in a straight line before you with a potency of 800 for the first enemy,</span>
<span class="sd">        25% less for the second, and 50% less for all remaining enemies.</span>

<span class="sd">        **Kenki Gauge Cost**: 50</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">kenki_gauge</span> <span class="o">&gt;=</span> <span class="n">kenki_cost</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inc_kenki_gauge</span><span class="p">(</span><span class="o">-</span><span class="n">kenki_cost</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">n_targets</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">potency</span> <span class="o">=</span> <span class="mi">800</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mf">0.75</span><span class="o">+</span><span class="mf">0.50</span><span class="o">*</span><span class="p">(</span><span class="n">n_targets</span><span class="o">-</span><span class="mi">2</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">n_targets</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">potency</span> <span class="o">=</span> <span class="mi">800</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mf">0.75</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">potency</span> <span class="o">=</span> <span class="mi">800</span>

            <span class="k">return</span> <span class="n">potency</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">potency_mod</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Not enough Kenki available!&#39;</span><span class="p">)</span></div></div>

</pre></div>

      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        <a class="uplink" href="../index.html">Contents</a>
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, rconcep.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.1.
    </div>
  </body>
</html>